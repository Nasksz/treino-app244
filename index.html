<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const select = document.getElementById("selectEx");
const ctx = document.getElementById("grafico").getContext("2d");
let chart;

const exercicios = [];
for(let k in localStorage){
  if(k.endsWith("kg")){
    exercicios.push(k.replace("kg",""));
  }
}

[...new Set(exercicios)].forEach(e=>{
  const o=document.createElement("option");
  o.value=e;
  o.textContent=e;
  select.appendChild(o);
});

select.onchange=()=>{
  const ex=select.value;
  if(!ex)return;

  const dados=[];
  const labels=[];

  for(let i=1;i<=10;i++){
    const v=localStorage[ex+"kg"];
    if(v){
      dados.push(Number(v));
      labels.push("Treino");
    }
  }

  if(chart)chart.destroy();
  chart=new Chart(ctx,{
    type:"line",
    data:{
      labels,
      datasets:[{
        label:"Carga (kg)",
        data:dados,
        borderWidth:2,
        tension:.4
      }]
    },
    options:{
      plugins:{legend:{labels:{color:"#e5e7eb"}}},
      scales:{
        x:{ticks:{color:"#94a3b8"}},
        y:{ticks:{color:"#94a3b8"}}
      }
    }
  });
};
</script>
