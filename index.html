<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Treino Avan√ßado ‚Ä¢ App</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#020617">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#020617;
  color:#e5e7eb;
}
header{
  padding:16px;
  text-align:center;
  border-bottom:1px solid #1e293b;
}
.container{padding:16px;max-width:900px;margin:auto;}
.day{
  border:1px solid #1e293b;
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
}
.day h2{margin:0 0 10px;color:#38bdf8;}
.exercise{
  display:grid;
  grid-template-columns:1fr 70px 70px 30px;
  gap:6px;
  margin-bottom:6px;
}
input,select{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:8px;
  color:#e5e7eb;
  padding:6px;
  text-align:center;
}
.check{accent-color:#22c55e;}
.cardio{
  margin-top:8px;
  padding:8px;
  border-left:4px solid #22c55e;
}
.timer{
  position:fixed;
  bottom:16px;
  right:16px;
  background:#020617;
  border:1px solid #1e293b;
  border-radius:16px;
  padding:12px;
  text-align:center;
}
button{
  background:#22c55e;
  border:none;
  border-radius:8px;
  padding:6px 10px;
  font-weight:bold;
}
canvas{
  background:#020617;
  border-radius:12px;
}
</style>
</head>

<body>

<header>
<h1>üèãÔ∏è Treino Avan√ßado</h1>
<p>Mobilidade ‚Ä¢ Hipertrofia ‚Ä¢ Cardio</p>
</header>

<div class="container" id="app"></div>

<div class="container">
  <div class="day">
    <h2>üìä Evolu√ß√£o de Carga</h2>
    <select id="selectEx">
      <option value="">Selecione um exerc√≠cio</option>
    </select>
    <canvas id="grafico" height="200"></canvas>
  </div>
</div>

<div class="timer">
<p id="time">00:00</p>
<button onclick="startTimer()">‚ñ∂</button>
<button onclick="resetTimer()">‚èπ</button>
</div>

<script>
const treinos = {
"Segunda ‚Äî Peito ‚Ä¢ Tr√≠ceps ‚Ä¢ Ombro":[
"Supino reto","Supino inclinado","Crossover","Desenvolvimento","Tr√≠ceps corda"
],
"Ter√ßa ‚Äî Costas ‚Ä¢ B√≠ceps ‚Ä¢ Antebra√ßo":[
"Puxada alta","Remada curvada","Remada baixa","Rosca direta","Rosca martelo"
],
"Quarta ‚Äî Pernas (joelho valgo)":[
"Agachamento","Leg press","Cadeira abdutora","Passada","Eleva√ß√£o p√©lvica"
],
"Quinta ‚Äî Peito":[
"Supino halter","Crucifixo","Peck deck"
],
"Sexta ‚Äî Costas ‚Ä¢ B√≠ceps":[
"Barra fixa","Remada unilateral","Pulldown"
],
"S√°bado ‚Äî Pernas":[
"Agacho sum√¥","Stiff","Mesa flexora","Panturrilha"
],
"Domingo ‚Äî Detalhes":[
"Core","Abd√¥men","Alongamento"
]
};

const app=document.getElementById("app");
const select=document.getElementById("selectEx");
const ctx=document.getElementById("grafico").getContext("2d");
let chart;

// RENDER TREINOS
Object.entries(treinos).forEach(([dia,exs])=>{
  const d=document.createElement("div");
  d.className="day";
  d.innerHTML=`<h2>${dia}</h2>`;
  exs.forEach(ex=>{
    const key=(dia+ex).replace(/\s+/g,'_');
    d.innerHTML+=`
    <div class="exercise">
      <span>${ex}</span>
      <input placeholder="kg" value="${localStorage[key+'kg']||''}"
        oninput="localStorage['${key}kg']=this.value">
      <input placeholder="obs" value="${localStorage[key+'obs']||''}"
        oninput="localStorage['${key}obs']=this.value">
      <input type="checkbox" class="check"
        ${localStorage[key+'ck']?'checked':''}
        onchange="this.checked?localStorage['${key}ck']=1:localStorage.removeItem('${key}ck')">
    </div>`;
  });
  d.innerHTML+=`<div class="cardio">Cardio: 35 min</div>`;
  app.appendChild(d);
});

// POPULAR SELECT COM TODOS EXERC√çCIOS
Object.values(treinos).flat().forEach(ex=>{
  const id=ex.replace(/\s+/g,'_');
  const opt=document.createElement("option");
  opt.value=id;
  opt.textContent=ex;
  select.appendChild(opt);
});

select.onchange=atualizaGrafico;

// GR√ÅFICO
function atualizaGrafico(){
  const ex=select.value;
  if(!ex)return;

  const dados=[];
  const labels=[];

  for(let k in localStorage){
    if(k.includes(ex) && k.endsWith("kg")){
      dados.push(Number(localStorage[k]));
      labels.push("Treino");
    }
  }

  if(dados.length===0){
    alert("Ainda n√£o h√° cargas salvas para este exerc√≠cio.");
    return;
  }

  if(chart)chart.destroy();
  chart=new Chart(ctx,{
